<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Defuse the BOM</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
</head>
<body>



<main>
    <h2 id="message">This <span><i class="fas fa-bomb"></i></span> will self destruct in <span id="timer">5</span> seconds...</h2>
    <button id="defuser">Defuse the BOM</button>
</main>






<script>
(function() {
    "use strict";

    var detonationTimer = 3;
    var miliseconds = 1000;
    let bodyElement = document.getElementsByTagName('body')[0];
    let bomElement = document.getElementsByClassName('defuseBom');
    console.log(bomElement);
    // TODO: This function needs to be called once every second
    var bombId = setInterval (function updateTimer() {
        if (detonationTimer == 0) {

            bodyElement.style.backgroundColor = 'red';
            document.body.innerHTML = '';
            // alert('EXTERMINATE!');

        } else if (detonationTimer > 0) {
            document.getElementById('timer').innerHTML = detonationTimer;
        }

        detonationTimer--;
    }, miliseconds);

    // TODO: When this function runs, it needs to
    // cancel the interval/timeout for updateTimer()
    function defuseTheBOM() {
        // document.getElementById('message').innerHTML = 'Defused!'
        clearTimeout(bombId);
        bodyElement.style.backgroundColor = '#00ff00';
        document.body.innerHTML = '';
        // alert('Defused!');
    }

    // Don't modify anything below this line!
    //
    // This causes the defuseTheBOM() function to be called
    // when the "defuser" button is clicked.
    // We will learn about events in the DOM lessons
    var defuser = document.getElementById('defuser');
    defuser.addEventListener('click', defuseTheBOM);
})();
</script>
</body>
</html>
